<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/tipTip.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/themes/base/jquery.ui.all.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.tipTip.minified.js")" type="text/javascript"></script>
</head>
<body>
    <div class="page">
        <header>
            <div id="title">
                <a href="@Url.Action("Index", "Home")" style="font-weight: bold; font-size: x-large; color: white; text-decoration: none">
                    Localizable
                </a> 
                <p style="font-style: italic; color: white; margin-top: -5px">- the online community for high-quality app translations!</p>
            </div>
            <div id="logindisplay">
                @Html.Partial("_LogOnPartial")
            </div>
        <br/>
        </header>
        <section id="main">
@*            @if (TempData.ContainsKey("Message"))
            {
                <div style="background-color: InfoBackground; color: InfoText; padding: 2px; margin: 3px; border: black 1px solid" class="popup">@TempData["Message"]</div>
            }
            @if (TempData.ContainsKey("Error"))
            {
                <div style="background-color: Red; color: white; font-weight: bold; padding 2px; margin: 3px; border: black 1px solid" class="popup">@TempData["Error"]</div>
            }
*@            <div id="info" style="display: none;opacity: 0;position: absolute; display: block; z-index: 2; margin: 100px auto; padding: 5px 10px; text-align: center; max-width: 500px; background-color: lightyellow; border: 1px solid orange"></div>
            @RenderBody()
        </section>
        <footer>
        </footer>
    </div>
    <script>
        var visible = 1, invisible = 0;
        
        $(function () {
            $(".button").button();
            $(".tooltip").tipTip();
            @if (TempData.Keys.Contains("Message"))
            {
                <text>info('@Html.Raw((string)TempData["Message"])');</text>
            }

        });
        
        function info(optionalText, optionalCallback) {
            var $info = $("#info");
            var currentPrompt = $info.text();
            var validMessage = optionalText != null && optionalText != "";

            if (currentPrompt == "" && !validMessage)
                return null;

            if (optionalText === undefined)
                return currentPrompt;

            if (currentPrompt != "") {
                if (validMessage) {
                    $info.animate({ opacity: invisible }, { delay: 200, complete: optionalCallback });
                } 
                return null;
            }

            var delay = optionalText.length > 60 ? 5000 : 3000;

            $info
                .text(optionalText)
                .css("left", (($(window).width() - $info.outerWidth()) / 2) + $(window).scrollLeft() + "px")
                .animate({ opacity: visible }, { delay: 200, complete: function () {
                    $info.delay(delay).animate({ opacity: invisible }, { delay: 200, complete: function () {
                        $info.text("");
                        if (optionalCallback === undefined)
                            return;

                        if (typeof (optionalCallback) === "function")
                            optionalCallback();
                    }
                    });
                }
                });
        }
    </script>
</body>
</html>
